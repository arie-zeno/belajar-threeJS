import{S as P,P as V,W as E,A as R,D as W,G as B,a as F,B as G,V as h,C as O}from"./DRACOLoader-DzkvwZBd.js";function X(S,v){const r=document.getElementById(S),g=r.clientWidth,b=r.clientHeight,l=document.createElement("div");l.style.cssText=`
    position:absolute;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.85);color:white;
    display:flex;align-items:center;justify-content:center;
    font-size:18px;z-index:9999;transition:opacity 0.5s ease;
  `,l.textContent="Loading 3D...",r.appendChild(l);const f=new P;f.background=null;const s=new V(75,g/b,.1,2e3);s.position.set(0,2,5);const u=s.position.y,c=new E({antialias:!0,alpha:!0});c.setSize(g,b),c.setPixelRatio(window.devicePixelRatio),r.appendChild(c.domElement);const D=new R(16777215,.6),x=new W(16777215,5);x.position.set(10,10,10),f.add(D,x);const o={forward:!1,backward:!1,left:!1,right:!1},n={up:!1,down:!1,left:!1,right:!1},C=10,y=1.5;let w=0,M=0,d=null;document.addEventListener("keydown",t=>{switch(t.code){case"KeyW":o.forward=!0;break;case"KeyS":o.backward=!0;break;case"KeyA":o.left=!0;break;case"KeyD":o.right=!0;break;case"ArrowUp":n.up=!0;break;case"ArrowDown":n.down=!0;break;case"ArrowLeft":n.left=!0;break;case"ArrowRight":n.right=!0;break}}),document.addEventListener("keyup",t=>{switch(t.code){case"KeyW":o.forward=!1;break;case"KeyS":o.backward=!1;break;case"KeyA":o.left=!1;break;case"KeyD":o.right=!1;break;case"ArrowUp":n.up=!1;break;case"ArrowDown":n.down=!1;break;case"ArrowLeft":n.left=!1;break;case"ArrowRight":n.right=!1;break}});const k=new B,A=new F;A.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),k.setDRACOLoader(A);let L=!1;k.load(v,t=>{const i=t.scene;f.add(i);const a=new G().setFromObject(i),p=a.getCenter(new h),e=a.getSize(new h),m=1e-4;d={minX:a.min.x-m,maxX:a.max.x+m,minY:a.min.y-m,maxY:a.max.y+m*2,minZ:a.min.z-m,maxZ:a.max.z+m},s.position.set(p.x,u,a.max.z+e.z*.2),c.compile(f,s),requestAnimationFrame(()=>{c.render(f,s),l.style.opacity="0",setTimeout(()=>l.remove(),500)}),L=!0},t=>{const i=(t.loaded/t.total*100).toFixed(0);l.textContent=`Loading ${i}%`},t=>console.error("Error loading GLB:",t));const K=new O;function z(){const t=K.getDelta(),i=C*t;if(L&&d){n.left&&(w+=y*t),n.right&&(w-=y*t),s.rotation.set(M,w,0);const a=new h(-Math.sin(w),0,-Math.cos(w)).normalize(),p=new h().crossVectors(a,new h(0,1,0)),e=s.position.clone();o.forward&&e.addScaledVector(a,i),o.backward&&e.addScaledVector(a,-i),o.left&&e.addScaledVector(p,-i),o.right&&e.addScaledVector(p,i),n.up&&(e.y+=i),n.down&&e.y>u&&(e.y-=i),e.x=Math.max(d.minX,Math.min(d.maxX,e.x)),e.y=Math.max(u,Math.min(d.maxY,e.y)),e.z=Math.max(d.minZ,Math.min(d.maxZ,e.z)),s.position.copy(e)}c.render(f,s),requestAnimationFrame(z)}z(),window.addEventListener("resize",()=>{s.aspect=r.clientWidth/r.clientHeight,s.updateProjectionMatrix(),c.setSize(r.clientWidth,r.clientHeight)})}X("modal3d4","/assets/puskesmas/Puskes_Sungai_Andai.glb");
